###开发文档 --- 尧俊锋
---

提交时间：2015-10-18

提交到远程分支：feature-yjf

新增类：

*  com.lym.twogoods.message.viewHolder.MessageItemViewHolder.java

* com.lym.twogoods.message.adapter.MessageAdapter.java
*
* com.lym.twogoods.message.adapter.TestAdapter.java
 
* com.lym.twogoods.message.view.EmotionEditText.java
* 

   
 
修改原来的代码：

*  TimeUtil类的getCurrentTime的访问权限改为static
  
*  TimeUtil类的dateToString和stringToDate函数加判断语句
   if(formatType==null)
 		formatType = FORMAT_DATE_TIME;
* ImageUtil类增加dp2px和px2dp函数

* 修改了一些工具类的注释

  
新增开源系统

* BmobIM_V1.1.8beta_20150408.jar

新增布局文件：

*  message_list_item_conversation.xml
*  message_dialog.xml
*  message_dialog.xml
*  message_chat_activity.xml
*  message_chat_add_content.xml
*  message_chat_bottom_bar.xml


新增drawable文件中的xml文件

* message_btn_chat_add_selector.xml
* message_btn_chat_emo_selector.xml
* message_btn_chat_send_selector.xml
* message_chat_add_location_selector.xml
* message_chat_add_picture_selector.xml
* message_chat_add_voice_selector.xml
* message_list_name_color_selector.xml
* message_list_text_color_selector.xml


新增资源文件：

* /res/drawable-hdpi/message_list_newmessage2.9.png
* /res/drawable-hdpi/message_base_horizontal_line.9.png
* /res/drawable-hdpi/message_base_comment_emo_bar.9.png
* /res/drawable-hdpi/message_chat_add_location_press.png
* /res/drawable-hdpi/message_chat_add_location_normal.png
* /res/drawable-hdpi/message_chat_add_normal.png
* /res/drawable-hdpi/message_chat_add_press.png
* /res/drawable-hdpi/message_chat_add_picture.press.png
* /res/drawable-hdpi/message_chat_add_picture.normal.png
* /res/drawable-hdpi/message_chat_base_edit_input.9.png
* /res/drawable-hdpi/message_chat_emo_normal.png
* /res/drawable-hdpi/message_chat_emo_press.png
* /res/drawable-hdpi/message_chat_record.png
* /res/drawable-hdpi/message_chat_send.n.png
* /res/drawable-hdpi/message_chat_send.p.png
* /res/drawable-hdpi/message_chat_top_voice.bg.9.png

-------

提交时间：2015-10-19

提交到远程分支：feature-yjf

新增类：

*  com.lym.twogoods.message.chatfragment.ChatFragment.java


修改的类:

*  com.lym.twogoods.message.ui.ChatActivity.java
*  com.lym.twogoods.message.util.ImageUtil.java
（增加getImage(String imagePath)方法，一些方法增加了详细的注释
增加saveBitmap(String imagepath,Bitmap bitmap)方法）

------

提交时间：2015-10-22

提交到远程分支：feature-yjf

新增类：




修改的类:

* com.lym.twogoods.message.ui.ChatActivity.java

*  com.lym.twogoods.message.ui.ChatFragment.java

*  com.lym.twogoods.message.util.FileUtil.java
（修改了其中的方法）
*  com.lym.twogoods.message.util.ImageUtil.java
（重载saveBitmap方法）


----------

提交时间：2015-10-26

提交到远程分支：feature-yjf

新增类：

* com.lym.twogoods.message.ui.SendPictureActivity.java
* com.lym.twogoods.message.fragment.CameraFragment.java
* com.lym.twogoods.message.fragment.PictureFragment.java


新增的文件

* message_chat_send_local_picture.xml
* message_chat_take_photo.xml
* message_chat_slide_in.xml
* message_chat_slide_out.xml

修改的类:

* com.lym.twogoods.message.ui.ChatActivity.java

*  com.lym.twogoods.message.ui.ChatFragment.java
*  com.lym.twogoods.utils.FileUtil.java  （修改了一些方法）

*  com.lym.twogoods.utils.ImageUtil.java （修改了getImage和getImageThumbnail方法  增加了decodeSampledBitmapFromFile和
  decodeSampledBitmapFromResource方法）


修改的文件

*  string.xml
*  AndroidManifest.xml
*  style.xml

新增资源文件

* message_chat_camera.png
* message_chat_dir_choose.png
* message_chat_pic_dir.png
* message_chat_unselected.png
* message_chat_no.png
* message_chat_selected.png


---

提交时间：2015-10-27

提交到远程分支：feature-yjf

新增类：



修改的类:

* com.lym.twogoods.message.ui.ChatActivity.java
*  com.lym.twogoods.message.utils.Imageutils.java（增加了decodeBitmapFromNet方法来读取网络图片）
* com.lym.twogoods.bean.ChatSnapshot.java（增加数据成员头像的url和相关get、set函数）
* com.lym.twogoods.config.ChatConfiguration.java（增加成员变量TYPE_MESSAGE_LOCATION）
	

修改的文件

*  string.xml
*  dimens.xml
*  styles.xml
*  AndroidManifest.xml
*  message_chat_item_received_image.xml
*  message_chat_item_received_location.xml
*  message_chat_item_received_voice.xml
*  message_chat_item_received_message.xml
*  message_chat_item_send_image.xml
*  message_chat_item_send_location.xml
*  message_chat_item_send_voice.xml
*  message_chat_item_send_message.xml


新增资源文件

* message_chat_location_default.9.png
* message_chat_voice_left3.png
* message_chat_voice_right3.png
* message_chat_item_receive_msg.9.png 
* message_chat_item_send_msg.9.png
* message_chat_reconding_audio1.png
* message_chat_reconding_audio2.png
* message_chat_reconding_audio3.png


新增drawable里的xml文件

* message_chat_btn_fail_resend.xml



---

提交时间：2015-11-1 0:30

提交到远程分支：feature-yjf

新增类：

* com.lym.twogoods.message.listener.RecordTouchListener.java 

新增xml布局文件

* app_chat_record_content.xml （与录音相关的的布局文件）

修改的类:

* com.lym.twogoods.message.ChatActivity.java

* com.lym.twogoods.message.MessageChatAdapter.java

* com.lym.twogoods..message.ChatFragment.java

* com.lym.twogoods.bean.ChatDetailBean.java（删除了newwork_url和direction属性，还有相应的方法）
* com.lym.twogoods.config.ChatConfiguration.java（删除了
direction的消息类型）
 


修改的xml文件

*  AndroidManifest.xml（增加录音的权限）
*  strings.xml


---

提交时间：2015-11-1 13:30

提交到远程分支：feature-yjf


修改的类:

* com.lym.twogoods.bean.ChatDetailBean.java（修改status的类型为int）
* com.lym.twogoods.message.ChatSnapshot.java（增加last_message_status）
* com.lym.twogoods..message.MessageConfig.java（增加判断last_message_status的字段）
* com.lym.twogoods.message.ChatActivity1.java
* com.lym.twogoods.db.OrmDatabaseHelper.java


---

提交时间：2015-11-16 20:30

提交到远程分支：feature-yjf

新增的类

* com.lym.twogoods.receiver.NetworkTipsBroadcast.java （用来提示网络未连接）
* com.lym.twogoods.setting.NewMessageSetting.java （新消息设置）

修改的类

* com.lym.twogoods.service.ChatService.java
*  com.lym.twogoods.ui.MainActivity.java   （增加broadcastreceive和启动ChatService）

修改的文件

*   AndroidManifest.xml （注册NetworkTipsBroadcast，增加手机震动的权限）

---

提交时间：2015-11-16 22:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.MainActivity.java  ChatService（暂时用不了，待需完善）
*

提交时间：2015-11-16 22:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.MainActivity.java  （增加eventbus）
*  com.lym.twogoods.util.TimeUtil.java  （修改getChatTime函数）
*  com.lym.twogoods.message

--------

提交时间：2015-11-23 12:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.MainActivity.java 
*  com.lym.twogoods.message.ui.ChatActivty.java 
*  com.lym.twogoods.fragment.MessageFragment.java
*  com.lym.twogoods.adaapter.MessageChatAdapter.java


-------

提交时间：2015-11-23 21:00

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.MainActivity.java 
*  com.lym.twogoods.message.ui.ChatActivty.java （改进）
*  com.lym.twogoods.adaapter.MessageChatAdapter.java （改善了图片处理—）

-------

提交时间：2015-11-26 00:20

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.adaapter.MessageChatAdapter.java （解决bug）
*  com.lym.twogoods.service.ChatService.java

新增的类
*  com.lym.twogoods.message.view.BadgeView.java(用来显示有新消息时的提醒，即头像右上角有红色的新消息数目)

-----

提交时间：2015-12-1 00:20

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.widge.EmojiTextView.java
*  com.lym.twogoods.service.ChatService.java
*  com.lym.twogoods.fragment.MessageFragment.java
*  com.lym.twogoods.MessageChatAdapter.java


-----

提交时间：2015-12-4 00:00

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.message.config.MessageConfig.java
*  com.lym.twogoods.message.ui.ChatActivity.java
*  com.lym.twogoods.message.RecordPlayClickListener.java(完善录音播放监听器)
*  com.lym.twogoods.service.ChatService.java



新建的类

*  com.lym.twogoods.message.config.ChatBottomConfig.java(点击添加按钮后显示viewpager里的gridview的配置)
*  com.lym.twogoods.message.adapter.ChatAddViewPagerAdapter.java(在聊天界面点击添加按钮后显示的viewpager的适配器)
*  com.lym.twogoods.message.adapter.ChatButtonGridViewAdapter.java(在聊天界面点击添加按钮后显示的viewpager里面的gridview的适配器)


修改的布局文件

* app_chat_record_content.xml (修改里面的布局)
* message-chat_bottom.bar.xml
*  message-chat_add_content.xml

新建的布局文件

* message_chat_record_context.xml
* message_chat_bottom_add_item.xml


提交时间：2015-12-9 00:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.message.ImageCusView.java(完善录音)
*  com.lym.twogoods.message.ui.ChatActivity.java(改进了发送消息)
*  com.lym.twogoods.message.fragment.ChatFragment.java(改进了重发消息)

新增的类

*  com.lym.twogoods.message.config.RecordConfig.java

修改的资源文件

* message_list_item_conversation.xml

新增资源文件

* message_chat_status_sending.png



修改时间：2015-12-12 21:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.message.ui.ChatActivity.java(完善)
*  com.lym.twogoods.service.ChatService.java(完善接收消息，改进本地数据库的数据更新，还有改进新消息到来时的通知)
*  com.lym.twogoods.utils.TimeUtil.java(修改了其中的方法)
*  com.lym.twogoods.fragment.ChatDetailFragment.java(修改了跟ChatActivity有关的地方)
*  com.lym.twogoods.message.fragment.ChatFragment.java
*  com.lym.twogoods.fragment.MessageFragment.java

修改的xml文件

* message_list_item_conversation.xml

新增的类

* com.lym.twogoods.message.ChatSetting.java(有关消息通知的设置)
* com.lym.twogoods.message.JudgeConfig.java


修改时间：2015-12-13 23:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.message.ui.ChatActivity.java(完善)
*  com.lym.twogoods.fragment.MessageFragment.java
* com.lym.twogoods.message.Adapter.MessageChatAdapter.java(修改了点击头像调转到个人信息界面)
*  com.lym.twogoods.message.Adapter.TipAdapter


新增的资源文件

* message_list_no_login_tip.xml(没有登录时提示用户登录)


修改时间：2015-12-30 23:30

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.MainActivity.java(登录后通过eventbus来通知开启服务；退出登录后也是通过eventbus来通知停止服务，)
*   com.lym.twogoods.fragment.MessageFragment(增加了setLoginState（）方法，通过此方法设置登录状态，以此来告知fragment要刷新界面)



修改时间：2016-1-3 23:55

提交到远程分支：feature-yjf

修改的类

*  com.lym.twogoods.ui.SendPictureActivity.java(对搜索到的图片进行改进，一些不能显示的图片文件被过滤掉)
* com.lym.twogoods.message.adapter.MessageChatAdapter.java(改正语音消息长度，还处理了一个小bug)
*   com.lym.twogoods.service.ChatService.java(改进了关闭后台service出现的bug)
* com.lym.twogoods.message.adapter.ChatAdapter.java

修改的资源文件

* message_chat_camera.png（将原来的图片换掉）